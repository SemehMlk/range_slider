   // Utilise KemmTimeProvider pour récupérer la date courante
    public static String getCurrentFormattedDate() {
        LocalDateTime now = LocalDateTime.now(KemmTimeProvider.getClock());  // Utilise le Clock mocké
        DateTimeFormatter formatter = DateTimeFormatter.ofPattern(Constants.DATE_TIME_FORMAT);
        return now.format(formatter);
    }



@Test
public void testConvertWithMockedDate() {
    // Mock de l'horloge pour une date fixe
    LocalDateTime fixedDate = LocalDateTime.parse("9999-12-31T00:00:00");
    KemmTimeProvider.useFixedClockAt(fixedDate);

    // Appeler la méthode que tu veux tester
    OutputMessage actual = swiftConverterService.convertMessage(
        MappingType.builder().mappingKey("mappingKey").build(),
        "msgContent".getBytes(), "inputType", new ArrayList<>()
    );

    // Vérifier que la date dans le résultat est celle que tu as mockée
    assertThat(actual).isEqualTo(new OutputMessage(...)); // Contenu attendu avec la date mockée
}





public class KemmTimeProvider {

    private static Clock clock = Clock.systemDefaultZone();

    public static Clock getClock() {
        return clock;
    }

    public static void useFixedClockAt(LocalDateTime date) {
        clock = Clock.fixed(date.atZone(ZoneId.systemDefault()).toInstant(), ZoneId.systemDefault());
    }
}
